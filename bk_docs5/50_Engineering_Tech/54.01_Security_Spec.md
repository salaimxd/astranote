# セキュリティ仕様書

> **テンプレート利用ガイド**
> システム全体のセキュリティ対策方針です。
> **利用職種**: Security Engineer, All Engineers

---

## 1. データ保護
- **通信**: 全通信をTLS/SSL (Cloudflare) で暗号化。
- **データ**: パスワードは `argon2` 等の強力なアルゴリズムでハッシュ化。
- **バックアップ**: Cloudflare D1 Time Travel (30日復元)。

---

## 2. アプリケーションセキュリティ
- **入力検証**: Zodを使用し、API入力値を厳格に検証 (SQLi防止)。
- **XSS対策**: React/Astroのエスケープ機能活用。小説本文表示時のサニタイズ。
- **CSRF対策**: Hono CSRFミドルウェア、SameSite Cookie。
- **Rate Limiting**: Cloudflare Workers Rate Limiting (DDoS防止)。

---

## 3. APIセキュリティ
- **認証**: 公開エンドポイント以外はBearer Token必須。
- **認可**: ロールベースアクセス制御 (RBAC)。
- **CORS**: フロントエンドドメインのみ許可。

---

## 4. コンテンツモデレーション
- **R18**: フラグ管理によるゾーニング。
- **通報**: ユーザー通報機能と管理画面による削除フロー。

---
## 関連ドキュメント
- [51.01_TechSpec_Auth.md](51.01_TechSpec_Auth.md)
