# PRD: MVP（Minimum Viable Product）

> Product Requirement Document (要件定義書)
> **利用職種**: PdM (主), EM, Designer, PMM

---

## 1. 概要 (Overview)

astranoteは、**WEB小説執筆に特化した最小限の執筆環境**を提供するエディタです。

「思考を妨げない」「スマホ読者を忘れない」「データが消えない」の3つの価値提案に集中し、書き手が「これがないと書く気が起きない」と感じる**コアな執筆体験**だけを実装します。

他の汎用エディタではなく、astranoteを選ぶ理由は、**WEB小説特有のニーズへの最適化**です。

---

## 2. 背景 (Background)

### 現状の課題

- **汎用エディタの限界**: WordやGoogleドキュメントは印刷物向けの設計で、WEB小説の執筆には最適化されていない
- **PC執筆とスマホ閲覧の乖離**: 執筆時にはスマホでどう見えるかが分からず、投稿後に「改行が詰まって読みにくい」という問題が発生
- **データ消失の恐怖**: ブラウザが閉じた瞬間に原稿が消える経験は、書き手を永久にそのツールから離脱させる
- **不要な機能の過多**: 高度な設定資料集やSNS機能など、執筆の初期段階では不要な機能がノイズとなる

### 市場・顧客の声

> "なろうに投稿する時、Wordで書いたものをコピペすると改行がおかしくなる。スマホで見た時の見た目を確認しながら書きたい。"
>
> "ブラウザのクラッシュで3000字分の原稿が消えた。それ以降はメモ帳で書いてバックアップを取るようにしている。"

参照: [ユーザーインタビュー](../20_Discovery_Research/)

---

## 3. 目標 (Goals & Success Metrics)

### ビジネスゴール

- **主目標**: WEB小説書き手が「これは分かってる」と感じる執筆体験を提供し、初期ユーザーを獲得する
- **副次的な目標**: MVPを通じて、書き手の実際の使用パターンとペインポイントを特定し、v2以降の機能優先順位を決定する

### 成功指標 (KPI)

| 指標 | ベースライン | 目標 | 測定方法 |
| --- | --- | --- | --- |
| 週次アクティブユーザー (WAU) | 0 | 100人 (3ヶ月後) | Analytics |
| 平均セッション時間 | - | 30分以上 | Analytics |
| データ消失によるサポート問い合わせ | - | 0件/月 | サポートチケット |
| なろう等への投稿完了率 | - | 50%以上 | ユーザーアンケート |

---

## 4. ターゲットユーザー

### プライマリペルソナ

- **WEB小説書き手（初心者〜中級者）**
- **ニーズ**:
  - スマホ読者を意識した執筆環境
  - データ消失の不安がない安全な環境
  - 装飾やレイアウトではなく、「文章を書くこと」に集中できるシンプルさ

### セカンダリペルソナ

- **長編小説を執筆中の書き手**
- **ニーズ**:
  - 複数エピソードの管理
  - 執筆メモの固定表示

---

## 5. ユーザーストーリー

### 書き手ストーリー1

> "WEB小説の書き手として、スマホでどう表示されるかを確認しながら執筆したい。なぜなら、読者の大半はスマホで読んでいるから。"

### 書き手ストーリー2

> "WEB小説の書き手として、ブラウザが落ちても原稿が消えない環境で執筆したい。なぜなら、過去に何度も原稿を失った経験があるから。"

### 書き手ストーリー3

> "WEB小説の書き手として、ルビや傍点を簡単に入力し、その場でプレビューしたい。なぜなら、記法を覚えるのが面倒だから。"

---

## 6. 機能要件 (Functional Requirements)

### Must Have (必須)

#### 1. シングル・カラム・エディタ

- [ ] **プレーンテキストベースの軽量エディタ**: 装飾機能を排除し、文章執筆に集中できる設計
- [ ] **タイプライター・スクロール**: 書き続けている行が常に画面中央に固定される
- [ ] **日本語最適化表示**: 行間1.7〜2.0、読みやすいフォント（Noto Sans JP等）をデフォルト設定
- [ ] **ルビ・傍点の簡易表示**: `｜文字《ルビ》` と入力した瞬間にエディタ上でルビが小さく表示される（プレビュー兼用）
- [ ] **ショートカットキー**:
  - `Ctrl + S`: 保存（ダミー反応でも可、書き手の習慣に対応）
  - `Ctrl + K`: ルビ記法 `｜《》` の挿入
  - `Ctrl + B`: 傍点記法 `《《》》` の挿入

#### 2. スマホ幅プレビュー

- [ ] **リアルタイム同期プレビュー**: エディタの横に、スマホ幅（375px程度）でリアルタイム表示
- [ ] **改行ガイド**: スマホで見た時に5行以上続く段落に警告表示
- [ ] **プレビューのスクロール同期**: エディタをスクロールすると、プレビューも連動してスクロール

#### 3. エピソード管理

- [ ] **サイドバー形式のエピソードリスト**: 第1話、第2話…とリスト表示
- [ ] **ドラッグ&ドロップでの並び替え**: エピソードの順序を簡単に変更可能
- [ ] **執筆中メモ（固定表示）**: 画面の隅に常に表示される小さなテキストエリア。「今の話でやりたいこと」をメモ

#### 4. オートセーブ & バックアップ

- [ ] **IndexedDBへの即時保存**: ネット接続が切れてもブラウザに自動保存（5秒ごと）
- [ ] **ローカル保存（txt出力）**: ワンクリックで `.txt` ファイルとしてダウンロード可能
- [ ] **復元機能**: ブラウザが閉じた後も、再度開いた時に前回の内容を自動復元

### Should Have (重要だが必須ではない)

- [ ] **ダークモード**: 目に優しい暗い配色モード
- [ ] **文字数カウント**: リアルタイムで文字数を表示

### Could Have (あれば良い)

- [ ] **エクスポート形式の選択**: txt以外にMarkdown形式での出力

### Won't Have (今回は対象外)

- **高度な相関図・設定資料集**: 凝ったDBを作るより、まずは「メモ帳」で十分
- **AI執筆支援**: 精度が中途半端だとノイズになる
- **SNS機能**: 書き手は「書く」ことに集中したい
- **独自の投稿プラットフォーム**: 既存サイト（なろう等）へコピペしやすい設計を優先

---

## 7. UI/UX要件

### 画面構成

| セクション | 役割 | 幅 |
| --- | --- | --- |
| **左サイドバー** | エピソード一覧（ドラッグで順序入れ替え） | 200px |
| **中央エディタ** | 執筆エリア（装飾なし、タイプライタースクロール） | 可変 |
| **右サイドバー** | スマホ表示プレビュー ＋ 執筆メモ | 400px |

### デザイン要件

- **シンプルさ最優先**: UIは最小限、ボタンや装飾を排除
- **視線の固定**: タイプライター・スクロールで首が疲れない設計
- **マウス操作の削減**: 主要機能は全てショートカットキーで操作可能

参照: [UI Spec](../40_Design_UX/41.01_UI_Spec_Editor.md)

### アクセシビリティ

- [ ] キーボード操作対応（全機能をマウスなしで操作可能）
- [ ] スクリーンリーダー対応（ARIA属性の適切な設定）

---

## 8. 非機能要件 (Non-Functional Requirements)

### パフォーマンス

- エディタの入力遅延: 50ms以内
- プレビューの更新遅延: 100ms以内
- 10万文字までの原稿でも快適に動作

### セキュリティ

- ブラウザ内のデータは暗号化（IndexedDB）
- ローカル保存以外のデータ送信は行わない（オフライン完結）

### スケーラビリティ

- MVP段階では考慮不要（ローカルストレージのみ）

### 可用性

- オフライン動作: 100%（ネット接続不要）

---

## 9. 技術要件・制約

- **使用技術**: 後述のADRで決定（候補: React, Vue, Tauri）
- **外部API**: なし（MVP段階では外部サービス連携なし）
- **データベース変更**: なし（IndexedDBのみ）
- **マイグレーション**: 不要

参照: [Tech Spec](../50_Engineering_Tech/52.01_ADR_Tech_Stack.md)

---

## 10. ユーザーフロー

### フロー1: 新規執筆

1. ユーザーがastranoteを起動
2. 左サイドバーの「新規エピソード」ボタンをクリック
3. 中央エディタに文字を入力開始
4. 右サイドバーにリアルタイムでスマホプレビューが表示される
5. 5秒ごとに自動保存（ユーザーは保存を意識しない）

### フロー2: 既存原稿の復元

1. ユーザーがブラウザを再度開く
2. 前回の執筆内容が自動的に復元される
3. エピソードリストから続きを選択して執筆再開

### エラーハンドリング

| エラーケース | 原因 | ユーザーへの表示 | システムの挙動 |
| --- | --- | --- | --- |
| IndexedDB保存失敗 | ブラウザのストレージ容量不足 | "保存に失敗しました。ブラウザのキャッシュをクリアしてください。" | エラーログを記録、リトライ可能 |
| ローカル保存失敗 | ファイルシステムへのアクセス拒否 | "ダウンロードに失敗しました。ブラウザの設定を確認してください。" | リトライ可能 |

---

## 11. 依存関係とリスク

### 依存関係

- **内部依存**: なし（単一アプリケーション）
- **外部依存**: なし（オフライン完結）

### リスクと対策

| リスク | 発生確率 | 影響度 | 対策 |
| --- | --- | --- | --- |
| ブラウザのIndexedDB制限 | Medium | High | ローカル保存（txt）を必須機能として実装 |
| タイプライター・スクロールのパフォーマンス問題 | Low | Medium | 仮想スクロール技術の採用検討 |
| ルビ表示の実装難易度 | Medium | Medium | 初期はプレビューのみ、エディタ内表示はv2で実装 |

---

## 12. ローンチ計画

### フェーズ

- **Phase 1 (MVP)**: 4つのコア機能のみ実装（本PRDの対象）
  - シングル・カラム・エディタ
  - スマホ幅プレビュー
  - エピソード管理
  - オートセーブ & バックアップ
- **Phase 2**: ユーザーフィードバックを基に機能追加
  - ダークモード
  - エクスポート形式の拡張
  - 執筆統計（文字数グラフなど）
- **Phase 3**: プラットフォーム連携
  - なろう等への直接投稿機能

### ベータテスト

- **対象ユーザー**: WEB小説書き手 10〜20名（Twitterやフォーラムで募集）
- **期間**: 2週間
- **フィードバック収集方法**: Googleフォーム + 週次インタビュー

### ロールアウト戦略

- **対象プラン**: 無料（MVP段階では全ユーザー対象）
- **段階的リリース**: 不要（小規模リリース）

---

## 13. マーケティング・GTM

### メッセージング

> "WEB小説書き手のための、**スマホ読者を忘れないエディタ**。書くことだけに集中できる、シンプルで安全な執筆環境。"

### チャネル

- [ ] Twitter（書き手コミュニティ）
- [ ] 小説投稿サイトのフォーラム
- [ ] ブログ記事（技術的な意思決定の共有）

参照: [Messaging House](../60_Marketing_GTM/)

---

## 14. サポート・ドキュメント

### 必要なドキュメント

- [ ] クイックスタートガイド（3分で使い方が分かる）
- [ ] FAQ（よくある質問）
- [ ] ショートカットキー一覧

参照: [Help Article](../70_Customer_Enablement/)

---

## 15. オープンクエスチョン

- [ ] **Q1**: タイプライター・スクロールは全画面の中央か、上から3分の1の位置か？（決定者: Designer, 期限: 設計フェーズ）
- [ ] **Q2**: ルビのプレビュー表示はエディタ内か、プレビューエリアのみか？（決定者: TechLead, 期限: 実装フェーズ）

---

## 16. 承認

| 役割 | 名前 | 承認日 | サイン |
| --- | --- | --- | --- |
| PdM | - | - | - |
| EM | - | - | - |
| Design Lead | - | - | - |

---

## 17. 変更履歴

| 日付 | 変更者 | 変更内容 |
| --- | --- | --- |
| 2026-01-22 | Claude | 初版作成（MVP提案を基にPRD化） |

---

## 18. 関連ドキュメント

- [UI Spec: エディタ](../40_Design_UX/41.01_UI_Spec_Editor.md)
- [ADR: 技術スタック選定](../50_Engineering_Tech/52.01_ADR_Tech_Stack.md)
- [戦略: ビジョンとロードマップ](../10_Strategy_Planning/)
