---
title: 翻訳機能仕様
description: Star Novel のAI自動翻訳機能の詳細仕様
---

## 概要

Star Novelのコア機能である「AI自動翻訳」の詳細仕様です。日本語で投稿された小説を、自動的に多言語に翻訳し、グローバルな読者に届けます。

:::note[差別化ポイント]
この機能がStar Novelの最大の差別化要因です。
「一筆で、世界へ。」を実現する中核機能。
:::

---

## 翻訳パイプライン

### 全体フロー

```
┌─────────────────────────────────────────────────────────────┐
│                    翻訳パイプライン                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 投稿                                                    │
│     作家が日本語で章を投稿                                  │
│            │                                                │
│            ▼                                                │
│  2. 前処理                                                  │
│     ┌─────────────────────────────────────────────────┐    │
│     │ • ルビ抽出・保存                                │    │
│     │ • 用語集マッチング                              │    │
│     │ • 文章分割（センテンス単位）                    │    │
│     │ • 特殊表現の検出（傍点、センタリング等）        │    │
│     └─────────────────────────────────────────────────┘    │
│            │                                                │
│            ▼                                                │
│  3. 翻訳実行                                                │
│     ┌─────────────────────────────────────────────────┐    │
│     │ • LLM API呼び出し（Claude/GPT-4）              │    │
│     │ • 用語集の適用                                  │    │
│     │ • コンテキスト考慮（前後の章）                  │    │
│     └─────────────────────────────────────────────────┘    │
│            │                                                │
│            ▼                                                │
│  4. 後処理                                                  │
│     ┌─────────────────────────────────────────────────┐    │
│     │ • ルビ情報の復元                                │    │
│     │ • フォーマット復元                              │    │
│     │ • 品質チェック                                  │    │
│     └─────────────────────────────────────────────────┘    │
│            │                                                │
│            ▼                                                │
│  5. 保存・公開                                              │
│     翻訳版を保存し、読者に公開                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 対応言語

### 言語展開ロードマップ

| Phase | 言語 | 翻訳方向 | 優先度 |
|-------|------|---------|--------|
| 1 | 英語 | 日→英 | Must |
| 2 | 韓国語 | 日→韓 | Must |
| 2 | 中国語（繁体） | 日→繁 | Must |
| 3 | 中国語（簡体） | 日→簡 | Should |
| 3 | スペイン語 | 日→西 | Should |
| 4 | フランス語 | 日→仏 | Could |
| 4 | ドイツ語 | 日→独 | Could |
| 4 | ポルトガル語 | 日→葡 | Could |

### 言語別特性

| 言語 | 特有の課題 | 対策 |
|------|-----------|------|
| 英語 | 敬語のニュアンス | 人称代名詞の使い分け、説明的表現 |
| 韓国語 | 敬語体系が複雑 | 適切な敬語レベルの選択 |
| 中国語（繁体） | 台湾・香港の表現差 | 地域設定オプション |
| 中国語（簡体） | 検閲対応 | センシティブワード検出 |
| スペイン語 | 地域差（スペイン/ラテンアメリカ） | 中立的スペイン語を採用 |

---

## 自動翻訳（日→英）

### 機能概要

| 項目 | 内容 |
|------|------|
| 機能ID | AUTO_TRANSLATION_EN |
| Phase | 1 |
| 優先度 | Must |

### 翻訳エンジン

| 項目 | 仕様 |
|------|------|
| 主エンジン | Claude 3.5 Sonnet（Anthropic） |
| バックアップ | GPT-4（OpenAI） |
| 切り替え条件 | 主エンジン障害時、自動切り替え |

### プロンプト設計

```markdown
# 翻訳プロンプト（簡略版）

あなたはライトノベルの専門翻訳者です。
以下の日本語テキストを英語に翻訳してください。

## 翻訳ガイドライン

1. **文体**: ライトノベルの軽快な文体を維持
2. **一人称**: 「俺」→ "I"、キャラの個性を反映
3. **擬音語**: 適切な英語表現に変換（例: ドキドキ → heart pounding）
4. **敬語**: キャラ関係に応じて表現を調整
5. **固有名詞**: 用語集に従う。未登録の場合はローマ字表記

## 用語集
{glossary}

## 前の章の要約
{previous_context}

## 翻訳対象テキスト
{source_text}

## 出力形式
翻訳結果のみを出力してください。説明は不要です。
```

### 翻訳品質目標

| 指標 | 目標 | 測定方法 |
|------|------|---------|
| BLEU スコア | 40以上 | 自動評価 |
| 人間評価（5段階） | 4.0以上 | サンプル評価 |
| 用語一貫性 | 95%以上 | 用語集との照合 |
| 処理時間 | 10秒/1000文字 | 平均処理時間 |

---

## 用語集システム

### 機能概要

| 項目 | 内容 |
|------|------|
| 機能ID | GLOSSARY_SYSTEM |
| Phase | 2 |
| 優先度 | Should |

### 用語登録

| フィールド | 必須 | 説明 |
|-----------|------|------|
| 原語（日本語） | ◎ | 元の表記 |
| 読み | ○ | ふりがな |
| 英語訳 | ◎ | 英語での表記 |
| カテゴリ | ◎ | 人名/地名/魔法/アイテム/その他 |
| 説明 | △ | 用語の解説 |
| 別表記 | △ | 同義語、略称 |

### 用語カテゴリ

| カテゴリ | 説明 | 翻訳時の処理 |
|---------|------|-------------|
| 人名 | キャラクター名 | 登録訳を優先、なければローマ字 |
| 地名 | 場所、国名 | 登録訳を優先 |
| 魔法・スキル | 能力名 | 登録訳を優先、なければ意訳 |
| アイテム | 道具、武器 | 登録訳を優先 |
| 称号・ランク | 勇者、Sランク等 | 登録訳を優先 |
| その他 | 上記以外 | 登録訳を優先 |

### 用語集の適用ロジック

```
┌─────────────────────────────────────────────────────────────┐
│                  用語集適用ロジック                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  入力: 「田中太郎は|聖剣《エクスカリバー》を手に取った」   │
│                                                             │
│  Step 1: 用語検索                                           │
│  ┌─────────────────────────────────────────────────┐       │
│  │ 「田中太郎」 → 用語集ヒット: "Taro Tanaka"     │       │
│  │ 「聖剣」 → 用語集ヒット: "Holy Sword"          │       │
│  │ 「エクスカリバー」 → 用語集ヒット: "Excalibur" │       │
│  └─────────────────────────────────────────────────┘       │
│                                                             │
│  Step 2: 置換マーカー挿入                                   │
│  「[TERM:Taro Tanaka]は[TERM:Holy Sword:Excalibur]を       │
│   手に取った」                                              │
│                                                             │
│  Step 3: LLM翻訳（マーカーは保持）                         │
│  "[TERM:Taro Tanaka] picked up the                          │
│   [TERM:Holy Sword:Excalibur]"                              │
│                                                             │
│  Step 4: マーカー展開                                       │
│  出力: "Taro Tanaka picked up the Holy Sword, Excalibur"   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 用語集テンプレート

| テンプレート | 収録数 | 内容 |
|-------------|--------|------|
| 異世界ファンタジー | 200+ | 勇者、魔王、スキル、ステータス等 |
| 学園もの | 100+ | 先輩、後輩、部活、文化祭等 |
| SF | 150+ | 宇宙船、AI、ハイパードライブ等 |
| ラブコメ | 80+ | 幼馴染、告白、デート等 |

---

## ルビ処理

### 機能概要

| 項目 | 内容 |
|------|------|
| 機能ID | RUBY_PROCESSING |
| Phase | 1 |
| 優先度 | Must |

### ルビの重要性

```
【ラノベにおけるルビの役割】

1. 読み方の指定
   例: |異世界《いせかい》 → 「いせかい」と読む

2. ニュアンスの付加
   例: |本気《マジ》 → 「本気」と書いて「マジ」と読む

3. 固有名詞の読み
   例: |聖剣《エクスカリバー》 → 「聖剣」を「エクスカリバー」と読む

4. 言葉遊び
   例: |約束《プロミス》 → 英語の響きを持たせる
```

### ルビの翻訳処理

| パターン | 日本語 | 英語翻訳 | 処理 |
|---------|--------|---------|------|
| 読み方指定 | \|異世界《いせかい》 | another world | ルビ削除、本文のみ翻訳 |
| 二重意味 | \|本気《マジ》 | serious (dead serious) | 括弧で補足 |
| 固有名詞 | \|聖剣《エクスカリバー》 | Excalibur | ルビを優先 |
| 造語 | \|無詠唱《ノーキャスト》 | No-Cast | ルビを優先 |

### 読者向け表示オプション

| オプション | 説明 |
|-----------|------|
| ルビ表示 | 原文のルビをそのまま表示（日本語学習者向け） |
| ルビ非表示 | ルビを隠して翻訳文のみ表示 |
| ホバー表示 | マウスオーバーで原文表示 |

---

## 翻訳品質管理

### 品質チェック項目

| チェック項目 | 自動/手動 | 説明 |
|-------------|---------|------|
| 文長の一致 | 自動 | 原文と翻訳の文数が一致 |
| 用語一貫性 | 自動 | 用語集との照合 |
| 禁止表現 | 自動 | 不適切な表現の検出 |
| 文法チェック | 自動 | 基本的な文法エラー |
| 読みやすさ | 自動 | Flesch Reading Ease |
| ニュアンス | 手動 | サンプルの人間レビュー |

### エラー処理

| エラー種別 | 対処 |
|-----------|------|
| API タイムアウト | リトライ（最大3回） |
| レート制限 | キュー待機 |
| 翻訳失敗 | バックアップエンジンへ切り替え |
| 品質不合格 | 再翻訳 + アラート |

### フィードバックシステム

```
┌─────────────────────────────────────────────────────────────┐
│  📝 翻訳フィードバック                                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  この翻訳は正確ですか？                                     │
│                                                             │
│  [👍 良い] [👎 改善が必要]                                  │
│                                                             │
│  問題がある場合:                                            │
│  □ 意味が違う                                              │
│  □ 不自然な表現                                            │
│  □ 用語の誤訳                                              │
│  □ その他                                                  │
│                                                             │
│  修正案（任意）:                                            │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  [送信]                                                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 翻訳コスト

### コスト構造

| 項目 | 単価 | 説明 |
|------|------|------|
| Claude 3.5 Sonnet | $3/1M input tokens | 入力トークン |
| Claude 3.5 Sonnet | $15/1M output tokens | 出力トークン |
| GPT-4 | $30/1M input tokens | バックアップ用 |
| GPT-4 | $60/1M output tokens | バックアップ用 |

### コスト試算（1章あたり）

| 章の長さ | 文字数 | トークン数（概算） | コスト（概算） |
|---------|--------|------------------|---------------|
| 短い章 | 3,000字 | 2,000 tokens | $0.03 |
| 標準章 | 5,000字 | 3,500 tokens | $0.05 |
| 長い章 | 10,000字 | 7,000 tokens | $0.10 |

### コスト最適化

| 施策 | 効果 |
|------|------|
| キャッシュ | 同一文の再翻訳を防止 |
| バッチ処理 | API呼び出しを効率化 |
| 差分翻訳 | 変更部分のみ再翻訳 |
| モデル選択 | 短文は軽量モデルで処理 |

---

## 非機能要件

### パフォーマンス

| 項目 | 要件 |
|------|------|
| 翻訳速度 | 5,000字/10秒以内 |
| 同時処理数 | 100章/分 |
| キュー処理 | 優先度付きFIFO |

### スケーラビリティ

| 項目 | 要件 |
|------|------|
| 水平スケール | API Gateway + Lambda |
| キュー | SQS/SNS |
| キャッシュ | Redis |

### 可用性

| 項目 | 要件 |
|------|------|
| 稼働率 | 99.5% |
| フェイルオーバー | 自動切り替え（30秒以内） |
| リトライ | 指数バックオフ |

---

## API設計

### 翻訳リクエスト

```json
POST /api/v1/translate
{
  "chapter_id": "ch_123456",
  "source_language": "ja",
  "target_language": "en",
  "options": {
    "use_glossary": true,
    "glossary_id": "gl_789",
    "priority": "normal"
  }
}
```

### 翻訳レスポンス

```json
{
  "translation_id": "tr_abc123",
  "status": "completed",
  "source_language": "ja",
  "target_language": "en",
  "translated_text": "...",
  "metadata": {
    "tokens_used": 3500,
    "processing_time_ms": 4500,
    "glossary_terms_applied": 12
  }
}
```

### 翻訳ステータス

| ステータス | 説明 |
|-----------|------|
| queued | キュー待ち |
| processing | 翻訳中 |
| completed | 完了 |
| failed | 失敗 |
| retry | リトライ中 |

---

## 今後の拡張

### Phase 3以降

| 機能 | 説明 |
|------|------|
| リアルタイム翻訳 | 読者がリクエスト時に翻訳 |
| 人間校正オプション | プロ翻訳者による校正（有料） |
| コミュニティ翻訳 | 読者による翻訳協力 |
| 翻訳メモリ | 過去の翻訳を学習 |

### 将来的な言語対応

| 言語 | 話者数 | 優先度 |
|------|--------|--------|
| アラビア語 | 3億人 | 低 |
| ヒンディー語 | 6億人 | 低 |
| ベトナム語 | 9,000万人 | 中 |
| タイ語 | 6,000万人 | 中 |
| インドネシア語 | 2億人 | 中 |

---

## 関連ドキュメント

| ドキュメント | 内容 |
|-------------|------|
| [作家向け機能仕様](/specs/features-writer/) | 作家向け機能の詳細 |
| [読者向け機能仕様](/specs/features-reader/) | 読者向け機能の詳細 |
| [用語集](/specs/glossary/) | 用語定義 |
