# MVP開発ガイドライン

このドキュメントは、MVP（Minimum Viable Product）の検証用アプリを開発する際のルールと方針を定めたものです。

## 基本方針

- 特に指示がない限り、必ず**日本語**で回答・コミュニケーションを行う
- **仕様駆動開発（Specification-Driven Development）**を実践する
- MVP仕様書（[`docs/docs/framework/validation/mvp.md`](../docs/docs/framework/validation/mvp.md)）を唯一の信頼できる情報源（SSOT）とする

## MVP開発の原則

### `app/` との違い

| 観点 | `mvp/`（検証用） | `app/`（本番用） |
| --- | --- | --- |
| 目的 | 仮説検証・学びの獲得 | 本番品質のプロダクト提供 |
| 品質基準 | 動作する最小限の品質 | 本番運用に耐える品質 |
| コード品質 | スピード優先、必要十分 | 保守性・拡張性を重視 |
| テスト | 最低限の動作確認 | 包括的なテスト |
| ライフサイクル | 短期（検証完了後に破棄 or `app/` へ移行） | 長期運用 |

### 3つの原則

1. **最小限の実装**：Must Have の機能のみ実装し、Will Not Have を厳守する
2. **仮説検証優先**：コードの美しさよりも、仮説を検証できるかどうかを優先する
3. **スピード重視**：完璧を目指さず、素早くリリースして学びを得る

## 仕様駆動開発の実践

### 開発フロー（Build-Measure-Learn）

1. **仮説確認**：MVP仕様書の「仮説定義」（セクション2）を確認する
2. **スコープ確認**：「機能スコープ」（セクション5）の Must Have / Will Not Have を確認する
3. **成功基準確認**：「成功基準とKPI」（セクション6）を確認する
4. **最小実装**：Must Have の機能を最小限のコードで実装する
5. **計測準備**：成功基準に基づくデータ収集の仕組みを組み込む
6. **リリース・計測**：アーリーアダプターに提供し、データを収集する
7. **学び・判断**：検証結果を記録し、継続 / ピボット / 中止を判断する

### 原則

- **仕様書を確認してから実装する**：MVP仕様書に定義されていない機能は実装しない
- **スコープを守る**：Will Not Have に定義された機能は絶対に実装しない
- **仕様の優先**：実装と仕様が矛盾する場合は、仕様を正とする

## GitHub タスク管理

### マイルストーンと Issue

- 開発進捗は **GitHub マイルストーン** で管理する
- タスクは **GitHub Issue** として登録する
- マイルストーン一覧：`${GITHUB_REPO_URL}/milestones`
- Issue 一覧：`${GITHUB_REPO_URL}/issues`

> **注意**：`GITHUB_REPO_URL` は `.env` ファイルで設定します（例：`https://github.com/owner/repo`）。`.env.example` を参考に `.env` ファイルを作成してください。

### Issue 連携

- PR 説明文に `Closes #<issue>` または `Fixes #<issue>` を記載すると、マージ時に Issue が自動クローズされる
- コミットメッセージにも Issue 番号を含める：`feat(auth): ユーザー認証機能を追加 (#12)`
- PR テンプレート（`.github/pull_request_template.md`）を活用してレビュープロセスを標準化する

## ブランチ戦略

プロダクト開発のライフサイクルに対応した、以下のブランチ戦略を採用する。

| ブランチ             | 用途                       | タイミング       |
| -------------------- | -------------------------- | ---------------- |
| `main`               | 安定版、本番リリース       | リリース時       |
| `release/v*`         | **リリース準備・最終調整** | Milestone 完了時 |
| `develop`            | 開発統合                   | 機能完了時       |
| `feature/#<issue>-*` | 機能開発                   | Issue 単位       |
| `fix/#<issue>-*`     | バグ修正                   | Issue 単位       |
| `hotfix/#<issue>-*`  | 本番緊急修正               | 緊急時           |

### ブランチ命名例

```
feature/#12-user-authentication
fix/#15-login-bug
release/v1.1.0
hotfix/#20-security-patch
```

## 品質チェック

MVPでは本番品質（`app/`）よりも軽量な品質チェックを採用する。

### 最低限のチェック項目

- **Lint**：基本的なコードスタイルの統一（`npm run lint` または `bun run lint`）
- **動作確認**：主要な機能が正しく動作すること
- **セキュリティ**：ユーザーデータを扱う場合は最低限のセキュリティ対策を実施

### 省略可能な項目（`app/` では必須）

- 型チェック（TypeScript strict mode）
- 包括的なユニットテスト・統合テスト
- パフォーマンス最適化

## コーディング規約

### セキュリティ（必須）

MVPであっても、以下のセキュリティ対策は必ず実施する：

- 以下のような一般的な脆弱性を導入しないこと：
  - コマンドインジェクション
  - XSS（クロスサイトスクリプティング）
  - SQLインジェクション
  - OWASP Top 10 に記載されているその他の脆弱性
- セキュリティに関わる設定値（APIキー、トークン等）は環境変数で管理し、コードに直接書かない

### コード品質（MVP向け）

- **動くことを優先**：過度な抽象化や将来への過剰な対応は避ける
- **シンプルに保つ**：必要最小限の実装にとどめる
- **計測コードを組み込む**：成功基準に基づくデータ収集の仕組みを実装に含める

## 検証・計測

### データ収集の方針

MVP仕様書の「成功基準とKPI」（セクション6）に基づき、以下の観点でデータを収集する：

- **定量データ**：ユーザー数、コンバージョン率、利用頻度など
- **定性データ**：ユーザーインタビュー、フィードバック、行動観察など

### 計測ツールの組み込み

- アナリティクス（Google Analytics、Mixpanel など）
- ヒートマップ（必要に応じて）
- フィードバック収集の仕組み（フォーム、チャット等）

## 開発環境

### 推奨ツール

- **パッケージマネージャー**：`bun` または `npm`
- **Linter**：ESLint、Prettier
- **テストフレームワーク**：プロジェクトで採用しているフレームワークに従う

### 環境変数

- `.env.example` をコピーして `.env` ファイルを作成する
- `.env` ファイルは Git に含めない（`.gitignore` に追加済み）
- 必要な環境変数は `.env.example` に記載し、チーム全体で共有する

## 関連ドキュメント

- [MVP仕様書](../docs/docs/framework/validation/mvp.md) - MVP計画・検証の詳細テンプレート
- [リーンキャンバス](../docs/docs/framework/validation/lean_canvas.md) - ビジネスモデルの概要
- [ペルソナ](../docs/docs/framework/discovery/persona.md) - ターゲットユーザーの定義
- [共感マップ](../docs/docs/framework/discovery/empathy_map/index.md) - ユーザーの理解
- [HMW](../docs/docs/framework/discovery/hmw.md) - 解決すべき課題
